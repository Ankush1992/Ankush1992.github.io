---
layout: post
title: Aaqaaaa
categories: tutorial
tags: [spring-boot]
comments: true
---

---
layout: post
title: Aaqaaaa
categories: tutorial
tags: [spring-boot]
comments: true
---

jjzxzxzxzxzxzx

{% highlight groovy %}

@RestController
@Slf4j
class ThumbnailController {

	final MessageSource msgSource
	final ErrorService errorService
	final ThumbnailService thumbnailService
	final Validator thumbnailValidator
	
	@Autowired
	def ThumbnailController(msgSource,errorService,thumbnailService,thumbnailValidator){
		this.msgSource=msgSource
		this.errorService=errorService
		this.thumbnailService=thumbnailService
		this.thumbnailValidator=thumbnailValidator
	}
	
	@RequestMapping(value="/",method=RequestMethod.GET)
	String getImgUploadPage(){
		"home"
	}
	
	@RequestMapping(value="/",method=RequestMethod.POST)
	def uploadImg(@RequestParam("file") MultipartFile file , BindingResult result)
	{
		def thumbnail =new Thumbnail(file :file ,
					     width: ThumbnailConstants.SCALED_WIDTH,
					     height:ThumbnailConstants.SCALED_HEIGHT)
		thumbnailValidator.validate(thumbnail,result)	
		try{
			if(!result.hasErrors()){
			    new ResponseEntity(thumbnailService.resizeAndSave(thumbnail)
				  	       ,HttpStatus.CREATED)
			}
			else{
			    new ResponseEntity(errorService.listErrors(msgSource,result)
				 	      ,HttpStatus.BAD_REQUEST)
			}
		}catch(ex){
			log.error("Unexpected error " ,ex)
			new ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR)
		}
	}
}

{% endhighlight %}
